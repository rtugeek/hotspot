import{a as x}from"./axios.js";import{W as I,g as v,d as y,o,c as n,r as U,a as j,t as c,_ as k,b,e as C,f as a,F as g,h,i as w,j as N,p as S,k as W}from"./index.js";class B{static getWidgetUrl(e,t,i){let s="";return e.startsWith("http")?s=e:s=t.getIndexUrl()+e,s.includes("?")?s+"&"+i.toUrlParams().toString():s+"?"+i.toUrlParams().toString()}static getWidgetPackageIndexUrl(e,t,i){const s=[e];return e.startsWith("http")?i&&s.push(e.endsWith("/")?"#":"/#"):(s.push(t.startsWith("/")?t:`/${t}`),i&&s.push(e.endsWith("#")?"":"#")),s.join("")}}class _{constructor(e){if(this.hash=!0,this.widgets=[],this.name=e.name,this.version=e.version,this.author=e.author,this.homepage=e.homepage,this.title=e.title,this.description=e.description,this.entry=e.entry,this.remoteEntry=e.remoteEntry,this.remotePackage=e.remotePackage,this.hash=e.hash,this.url=e.url,this.icon=e.icon,this.devOptions=e.devOptions,e.widgets)for(let t of e.widgets)this.widgets.push(t)}static parseJSON(e){const t=JSON.parse(e);return this.parseObject(t)}static parseObject(e){let t=new _({author:"",description:{"zh-CN":""},entry:"",hash:!1,homepage:"",name:"",title:{"zh-CN":""},url:"",version:""});Object.assign(t,e);const i=[];if(t.widgets)for(let s of t.widgets){let u=new I({description:{"zh-CN":""},height:0,keywords:[],lang:"zh-CN",name:"",routes:[],title:{"zh-CN":""},width:0});Object.assign(u,s),i.push(u)}return t.widgets.splice(0,t.widgets.length),t.widgets.push(...i),t}getTitle(e){return v(this.title,e)}getDescription(e){return v(this.description,e)}getIndexUrl(e){return B.getWidgetPackageIndexUrl(this.url,this.entry,e??this.hash)}}const P="/hotspot/logo.png",O={class:"bubbly-button"},$=y({__name:"BubblyButton",props:{color:{type:String,default:"#4d89ea"},label:{type:String}},setup(r){return(e,t)=>(o(),n("button",O,[U(e.$slots,"icon",{},void 0,!0),j(" "+c(r.label),1)]))}});const f=k($,[["__scopeId","data-v-384f6b49"]]),p=r=>(S("data-v-197d6c72"),r=r(),W(),r),z={class:"widget-landing-page"},L={class:"widget-package-box"},T={class:"flex desc"},q=p(()=>a("img",{alt:"logo",class:"logo",src:P},null,-1)),A={class:"package-info flex-col"},R={class:"title"},V=p(()=>a("div",null,null,-1)),D={class:"widget-tag-group"},E={class:"widget-tag"},F={class:"marquee"},J={class:"marquee__group"},G=["src"],H={class:"marquee__group"},K=["src"],M={key:1,class:"error"},Q=p(()=>a("p",null,"加载失败",-1)),X=y({__name:"Index",setup(r){const e=b(),t=b();x.get("/hotspot//widget.json").then(l=>{e.value=_.parseObject(l.data)}).catch(l=>{t.value=l});const i=C(()=>`widget://widgetjs.cn/package?url=${encodeURIComponent(e.value.remotePackage)}`),s=()=>{window.open("https://haihaihai.vip/")},u=()=>{window.location.href=i.value},m=l=>`/hotspot/${l}`.replaceAll("//","/");return(l,Y)=>(o(),n("div",z,[a("div",L,[e.value?(o(),n(g,{key:0},[a("div",T,[q,a("div",A,[a("div",R,c(e.value.getTitle()),1),a("div",null,c(e.value.getDescription()),1),V,a("div",D,[(o(!0),n(g,null,h(e.value.widgets,d=>(o(),n("div",E,c(d.getTitle()),1))),256))])]),w(f,{style:{"margin-left":"auto"},label:"在客户端打开",onClick:u,class:"bubbly-button"}),w(f,{onClick:s,class:"bubbly-button",label:"下载客户端"})]),a("div",F,[a("div",J,[(o(!0),n(g,null,h(e.value.widgets,d=>(o(),n("img",{src:m(d.previewImage)},null,8,G))),256))]),a("div",H,[(o(!0),n(g,null,h(e.value.widgets,d=>(o(),n("img",{src:m(d.previewImage)},null,8,K))),256))])])],64)):t.value?(o(),n("div",M,[Q,a("p",null,c(t.value.message),1),a("p",null,c(t.value.request.responseURL),1)])):N("",!0)])]))}});const te=k(X,[["__scopeId","data-v-197d6c72"]]);export{te as default};
