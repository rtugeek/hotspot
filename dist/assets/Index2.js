import{a as y}from"./axios.js";import{W as x,g as w,d as b,o as a,c as n,r as I,a as j,t as l,_ as k,b as v,e as U,f as s,F as h,h as _,i as m,w as B,p as C,j as S}from"./index.js";class W{static getWidgetUrl(e,t,o){let i="";return e.startsWith("http")?i=e:i=t.getIndexUrl()+e,i.includes("?")?i+"&"+o.toUrlParams().toString():i+"?"+o.toUrlParams().toString()}static getWidgetPackageIndexUrl(e,t,o){const i=[e];return e.startsWith("http")?o&&i.push(e.endsWith("/")?"#":"/#"):(i.push(t.startsWith("/")?t:`/${t}`),o&&i.push(e.endsWith("#")?"":"#")),i.join("")}}class p{constructor(e){if(this.hash=!0,this.widgets=[],this.name=e.name,this.version=e.version,this.author=e.author,this.homepage=e.homepage,this.title=e.title,this.description=e.description,this.entry=e.entry,this.remoteEntry=e.remoteEntry,this.remotePackage=e.remotePackage,this.hash=e.hash,this.url=e.url,this.icon=e.icon,this.devOptions=e.devOptions,e.widgets)for(let t of e.widgets)this.widgets.push(t)}static parseJSON(e){const t=JSON.parse(e);return this.parseObject(t)}static parseObject(e){let t=new p({author:"",description:{"zh-CN":""},entry:"",hash:!1,homepage:"",name:"",title:{"zh-CN":""},url:"",version:""});Object.assign(t,e);const o=[];if(t.widgets)for(let i of t.widgets){let u=new x({description:{"zh-CN":""},height:0,keywords:[],lang:"zh-CN",name:"",routes:[],title:{"zh-CN":""},width:0});Object.assign(u,i),o.push(u)}return t.widgets.splice(0,t.widgets.length),t.widgets.push(...o),t}getTitle(e){return w(this.title,e)}getDescription(e){return w(this.description,e)}getIndexUrl(e){return W.getWidgetPackageIndexUrl(this.url,this.entry,e==null?this.hash:e)}}const N="/hotspot/logo.png",P={class:"bubbly-button"},O=b({__name:"BubblyButton",props:{color:{type:String,default:"#4d89ea"},label:{type:String}},setup(r){return(e,t)=>(a(),n("button",P,[I(e.$slots,"icon",{},void 0,!0),j(" "+l(r.label),1)]))}});const f=k(O,[["__scopeId","data-v-384f6b49"]]),g=r=>(C("data-v-19a7d54f"),r=r(),S(),r),L={class:"widget-landing-page"},$={class:"widget-package-box"},V={class:"flex desc"},z=g(()=>s("img",{alt:"logo",class:"logo",src:N},null,-1)),T={class:"package-info flex-col"},q={class:"title"},R=g(()=>s("div",null,null,-1)),A={class:"widget-tag-group"},D={class:"widget-tag"},E=g(()=>s("template",{slot:"icon"},[s("div",null,[s("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M6 24.0083V42H42V24",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M33 23L24 32L15 23",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M23.9917 6V32",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})])])],-1)),M={class:"marquee"},F={class:"marquee__group"},J=["src"],H={class:"marquee__group"},G=["src"],K={key:1,class:"error"},Q=g(()=>s("p",null,"加载失败",-1)),X=b({__name:"Index",setup(r){console.log(window.location.origin);const e=v(),t=v();y.get("./widget.json").then(c=>{e.value=p.parseObject(c.data)}).catch(c=>{t.value=c});const o=U(()=>`widget://widgetjs.cn/package?url=${encodeURIComponent(e.value.remotePackage)}`),i=()=>{window.open("https://haihaihai.vip/")},u=()=>{window.location.href=o.value};return(c,Y)=>(a(),n("div",L,[s("div",$,[e.value?(a(),n(h,{key:0},[s("div",V,[z,s("div",T,[s("div",q,l(e.value.getTitle()),1),s("div",null,l(e.value.getDescription()),1),R,s("div",A,[(a(!0),n(h,null,_(e.value.widgets,d=>(a(),n("div",D,l(d.getTitle()),1))),256))])]),m(f,{style:{"margin-left":"auto"},label:"在客户端打开",onClick:u,class:"bubbly-button"},{default:B(()=>[E]),_:1}),m(f,{onClick:i,class:"bubbly-button",label:"下载客户端"})]),s("div",M,[s("div",F,[(a(!0),n(h,null,_(e.value.widgets,d=>(a(),n("img",{src:`./${d.previewImage}`},null,8,J))),256))]),s("div",H,[(a(!0),n(h,null,_(e.value.widgets,d=>(a(),n("img",{src:`./${d.previewImage}`},null,8,G))),256))])])],64)):(a(),n("div",K,[Q,s("p",null,l(t.value.message),1),s("p",null,l(t.value.request.responseURL),1)]))])]))}});const te=k(X,[["__scopeId","data-v-19a7d54f"]]);export{te as default};
