import{a as y}from"./axios.js";import{W as x,g as v,d as k,o,c as n,r as I,a as j,t as l,_ as f,b as w,e as C,f as s,F as h,h as _,i as m,w as U,j as B,p as N,k as S}from"./index.js";class W{static getWidgetUrl(e,t,a){let i="";return e.startsWith("http")?i=e:i=t.getIndexUrl()+e,i.includes("?")?i+"&"+a.toUrlParams().toString():i+"?"+a.toUrlParams().toString()}static getWidgetPackageIndexUrl(e,t,a){const i=[e];return e.startsWith("http")?a&&i.push(e.endsWith("/")?"#":"/#"):(i.push(t.startsWith("/")?t:`/${t}`),a&&i.push(e.endsWith("#")?"":"#")),i.join("")}}class p{constructor(e){if(this.hash=!0,this.widgets=[],this.name=e.name,this.version=e.version,this.author=e.author,this.homepage=e.homepage,this.title=e.title,this.description=e.description,this.entry=e.entry,this.remoteEntry=e.remoteEntry,this.remotePackage=e.remotePackage,this.hash=e.hash,this.url=e.url,this.icon=e.icon,this.devOptions=e.devOptions,e.widgets)for(let t of e.widgets)this.widgets.push(t)}static parseJSON(e){const t=JSON.parse(e);return this.parseObject(t)}static parseObject(e){let t=new p({author:"",description:{"zh-CN":""},entry:"",hash:!1,homepage:"",name:"",title:{"zh-CN":""},url:"",version:""});Object.assign(t,e);const a=[];if(t.widgets)for(let i of t.widgets){let u=new x({description:{"zh-CN":""},height:0,keywords:[],lang:"zh-CN",name:"",routes:[],title:{"zh-CN":""},width:0});Object.assign(u,i),a.push(u)}return t.widgets.splice(0,t.widgets.length),t.widgets.push(...a),t}getTitle(e){return v(this.title,e)}getDescription(e){return v(this.description,e)}getIndexUrl(e){return W.getWidgetPackageIndexUrl(this.url,this.entry,e??this.hash)}}const P="/hotspot/logo.png",O={class:"bubbly-button"},$=k({__name:"BubblyButton",props:{color:{type:String,default:"#4d89ea"},label:{type:String}},setup(r){return(e,t)=>(o(),n("button",O,[I(e.$slots,"icon",{},void 0,!0),j(" "+l(r.label),1)]))}});const b=f($,[["__scopeId","data-v-384f6b49"]]),g=r=>(N("data-v-a9c6b386"),r=r(),S(),r),L={class:"widget-landing-page"},V={class:"widget-package-box"},z={class:"flex desc"},T=g(()=>s("img",{alt:"logo",class:"logo",src:P},null,-1)),q={class:"package-info flex-col"},R={class:"title"},A=g(()=>s("div",null,null,-1)),D={class:"widget-tag-group"},E={class:"widget-tag"},M=g(()=>s("template",{slot:"icon"},[s("div",null,[s("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M6 24.0083V42H42V24",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M33 23L24 32L15 23",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M23.9917 6V32",stroke:"#333","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})])])],-1)),F={class:"marquee"},J={class:"marquee__group"},H=["src"],G={class:"marquee__group"},K=["src"],Q={key:1,class:"error"},X=g(()=>s("p",null,"加载失败",-1)),Y=k({__name:"Index",setup(r){const e=w(),t=w();y.get("/hotspot//widget.json").then(c=>{e.value=p.parseObject(c.data)}).catch(c=>{t.value=c});const a=C(()=>`widget://widgetjs.cn/package?url=${encodeURIComponent(e.value.remotePackage)}`),i=()=>{window.open("https://haihaihai.vip/")},u=()=>{window.location.href=a.value};return(c,Z)=>(o(),n("div",L,[s("div",V,[e.value?(o(),n(h,{key:0},[s("div",z,[T,s("div",q,[s("div",R,l(e.value.getTitle()),1),s("div",null,l(e.value.getDescription()),1),A,s("div",D,[(o(!0),n(h,null,_(e.value.widgets,d=>(o(),n("div",E,l(d.getTitle()),1))),256))])]),m(b,{style:{"margin-left":"auto"},label:"在客户端打开",onClick:u,class:"bubbly-button"},{default:U(()=>[M]),_:1}),m(b,{onClick:i,class:"bubbly-button",label:"下载客户端"})]),s("div",F,[s("div",J,[(o(!0),n(h,null,_(e.value.widgets,d=>(o(),n("img",{src:`./${d.previewImage}`},null,8,H))),256))]),s("div",G,[(o(!0),n(h,null,_(e.value.widgets,d=>(o(),n("img",{src:`./${d.previewImage}`},null,8,K))),256))])])],64)):t.value?(o(),n("div",Q,[X,s("p",null,l(t.value.message),1),s("p",null,l(t.value.request.responseURL),1)])):B("",!0)])]))}});const se=f(Y,[["__scopeId","data-v-a9c6b386"]]);export{se as default};
