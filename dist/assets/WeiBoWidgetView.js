var d=(a,r,t)=>new Promise((l,n)=>{var c=s=>{try{e(t.next(s))}catch(o){n(o)}},_=s=>{try{e(t.throw(s))}catch(o){n(o)}},e=s=>s.done?l(s.value):Promise.resolve(s.value).then(c,_);e((t=t.apply(a,r)).next())});import{u as b,a as f,H as v,b as x}from"./HotspotBox.js";import{d as m,W as y,r as B,o as W,n as k,a as i,b as h,w as p,g as w,F as C,h as L,K as I,t as S,i as H,u as F,B as P,p as V,j as $,e as u,_ as j}from"./index.js";const N="/hotspot/assets/weibo.svg",U=a=>(V("data-v-2957da27"),a=a(),$(),a),q=U(()=>u("div",{class:"weibo_header"},[u("img",{src:N,style:{"margin-right":"8px"},height:"18",alt:""}),u("div",{class:"weibo-top-nav"},"微博热搜")],-1)),z=m({__name:"WeiBoWidget",setup(a){const r=y.fromCurrentLocation(),t=B([]);W(()=>d(this,null,function*(){yield k(),yield c()})),b(()=>{c(),console.log("refresh")},20*60*1e3);function l(e){P.openUrl(`https://s.weibo.com/weibo?q=${e}`)}function n(e){return e.icon_desc?e.icon_desc:e.label_name?e.label_name:e.small_icon_desc}function c(){return d(this,null,function*(){const e=yield _.get("/ajax/side/hotSearch");t.value=e.data.data.realtime,console.info("weibo hot list",t.value)})}const _=f.create({baseURL:"https://weibo.com",withCredentials:!0,timeout:5e4});return(e,s)=>(i(),h(x,{class:"weibo-box",height:F(r).heightPx},{header:p(()=>[q]),body:p(()=>[(i(!0),w(C,null,L(t.value,(o,g)=>(i(),h(v,{onClick:D=>l(o.word),key:g,title:o.word,position:g+1},{append:p(()=>[n(o)?(i(),w("span",{key:0,class:"weibo-label",style:I({backgroundColor:o.small_icon_desc_color})},S(n(o)),5)):H("",!0)]),_:2},1032,["onClick","title","position"]))),128))]),_:1},8,["height"]))}});const A=j(z,[["__scopeId","data-v-2957da27"]]),R=m({__name:"WeiBoWidgetView",setup(a){return(r,t)=>(i(),h(A))}});export{R as default};
