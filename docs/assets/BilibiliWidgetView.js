var d=(s,l,e)=>new Promise((r,c)=>{var a=t=>{try{i(e.next(t))}catch(_){c(_)}},u=t=>{try{i(e.throw(t))}catch(_){c(_)}},i=t=>t.done?r(t.value):Promise.resolve(t.value).then(a,u);i((e=e.apply(s,l)).next())});import{a as f}from"./axios.js";import{d as m,x as w,b as v,m as x,n as y,o,q as h,w as n,c as b,F as B,h as k,u as I,v as g,p as C,j as L,f as p,_ as W,i as H,R as V}from"./index.js";import{u as F,H as N,a as P}from"./HotspotBox.js";const R="/hotspot/assets/bilibili_tv.png",S=s=>(C("data-v-27b27774"),s=s(),L(),s),$=S(()=>p("div",{class:"bilibili-header"},[p("img",{src:R,style:{"margin-right":"8px"},height:"18",alt:""}),p("div",{class:"bilibili-title"},"bilibili热搜")],-1)),j=["src"],q=m({__name:"BilibiliWidget",setup(s){const l=w.fromCurrentLocation(),e=v([]);x(()=>d(this,null,function*(){yield y(),yield r()})),F(()=>{r(),console.log("refresh")},20*60*1e3);function r(){return d(this,null,function*(){const a=yield c.get("/main/hotword");e.value=a.data.list,console.info("bilibili hot list",a.data.list)})}const c=f.create({baseURL:"https://s.search.bilibili.com/",withCredentials:!0,timeout:5e4});return(a,u)=>(o(),h(P,{class:"bilibili-box",height:g(l).heightPx},{header:n(()=>[$]),body:n(()=>[(o(!0),b(B,null,k(e.value,(i,t)=>(o(),h(N,{url:`https://search.bilibili.com/all?keyword=${i.keyword}`,key:t,title:i.show_name,position:t+1},{append:n(()=>[i.icon?(o(),b("img",{key:0,src:i.icon,style:{height:"18px"},alt:""},null,8,j)):I("",!0)]),_:2},1032,["url","title","position"]))),128))]),_:1},8,["height"]))}});const A=W(q,[["__scopeId","data-v-27b27774"]]),z=m({__name:"BilibiliWidgetView",setup(s){return(l,e)=>(o(),h(g(V),{"shadow-color":"#27a4ff"},{default:n(()=>[H(A)]),_:1}))}});export{z as default};
