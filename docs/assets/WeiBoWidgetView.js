var d=(a,r,s)=>new Promise((c,i)=>{var e=t=>{try{o(s.next(t))}catch(_){i(_)}},f=t=>{try{o(s.throw(t))}catch(_){i(_)}},o=t=>t.done?c(t.value):Promise.resolve(t.value).then(e,f);o((s=s.apply(a,r)).next())});import{a as w}from"./axios.js";import{u as b,H as g,a as v}from"./HotspotBox.js";import{d as m,b as y,m as x,n as B,o as n,q as u,w as l,c as h,F as W,h as k,y as I,t as S,u as C,p as L,j as H,f as p,_ as V,i as F,v as N,R}from"./index.js";const j="/hotspot/assets/weibo.svg",q=a=>(L("data-v-3e8f58d2"),a=a(),H(),a),$=q(()=>p("div",{class:"weibo_header"},[p("img",{src:j,style:{"margin-right":"8px"},height:"18",alt:""}),p("div",{class:"weibo-top-nav"},"微博热搜")],-1)),z=m({__name:"WeiBoWidget",setup(a){const r=y([]);x(()=>d(this,null,function*(){yield B(),yield c()})),b(()=>{c(),console.log("refresh")},20*60*1e3);function s(e){return e.icon_desc?e.icon_desc:e.label_name?e.label_name:e.small_icon_desc}function c(){return d(this,null,function*(){const e=yield i.get("/ajax/side/hotSearch");r.value=e.data.data.realtime,console.info("weibo hot list",r.value)})}const i=w.create({baseURL:"https://weibo.com",withCredentials:!0,timeout:5e4});return(e,f)=>(n(),u(v,{class:"weibo-box"},{header:l(()=>[$]),body:l(()=>[(n(!0),h(W,null,k(r.value,(o,t)=>(n(),u(g,{key:t,url:`https://s.weibo.com/weibo?q=${o.word}`,title:o.word,position:t+1},{append:l(()=>[s(o)?(n(),h("span",{key:0,class:"weibo-label",style:I({backgroundColor:o.small_icon_desc_color})},S(s(o)),5)):C("",!0)]),_:2},1032,["url","title","position"]))),128))]),_:1}))}});const A=V(z,[["__scopeId","data-v-3e8f58d2"]]),U=m({__name:"WeiBoWidgetView",setup(a){return(r,s)=>(n(),u(N(R),{"shadow-color":"#a8a8a8"},{default:l(()=>[F(A)]),_:1}))}});export{U as default};
